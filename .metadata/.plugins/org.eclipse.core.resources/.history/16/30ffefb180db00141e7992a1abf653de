package view;

import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.text.TableView;

import model.server.User;
import model.server.UserManagement;

@SuppressWarnings("serial")
public class LoginScreen extends JPanel{
	
	// User interface objects
	private JButton btn_register = new JButton("Registreer");
	private JLabel lbl_username = new JLabel("Gebruikersnaam");
	private JTextField input_username = new JTextField();
	private JLabel lbl_password = new JLabel("Wachtwoord");
	private JTextField input_password = new JTextField();
	private JButton btn_logIn = new JButton("Log in");

	private JLabel lbl_fail_login = new JLabel("Wachtwoord was onjuist.");
	
	public LoginScreen(){
		/* User interface */
		this.setLayout(null);
		
		btn_register.setSize(100, 25);
		btn_register.setLocation(Program.windowSize.width - btn_register.getWidth() - 8, 8);
		btn_register.addMouseListener(new MouseAdapter(){
			public void mouseReleased(MouseEvent event){
				
			}
		});
		this.add(btn_register);
		
		lbl_username.setSize(200, 25);
		lbl_username.setLocation((Program.windowSize.width * 1 / 2) - lbl_username.getWidth(), Program.windowSize.height * 3 / 10);
		this.add(lbl_username);
		
		input_username.setSize(200, 25);
		input_username.setLocation((Program.windowSize.width * 1 / 2), Program.windowSize.height * 3 / 10);
		this.add(input_username);
		
		lbl_password.setSize(200, 25);
		lbl_password.setLocation((Program.windowSize.width * 1 / 2) - lbl_username.getWidth(), Program.windowSize.height * 4 / 10);
		this.add(lbl_password);
		
		input_password.setSize(200, 25);
		input_password.setLocation((Program.windowSize.width * 1 / 2), Program.windowSize.height * 4 / 10);
		this.add(input_password);
		
		btn_logIn.setSize(200, 25);
		btn_logIn.setLocation((Program.windowSize.width * 1 / 2), Program.windowSize.height * 5 / 10);
		btn_logIn.addMouseListener(new MouseAdapter(){
			public void mouseReleased(MouseEvent event){
				Program.loggedInUser = UserManagement.userLogin(input_username.getText(), input_password.getText());
				if(Program.loggedInUser != null){
					Program.switchToPanel(PreGameScreen.class);
				}else{
					lbl_fail_login.setVisible(true);
					input_password.setText("");
				}
			}
		});
		this.add(btn_logIn);
		
		lbl_fail_login.setSize(200, 25);
		lbl_fail_login.setLocation((Program.windowSize.width * 1 / 2), Program.windowSize.height * 6 / 10);
		
	}
	
	//TODO call this function on show/goto ; also create an abstract screen (extends jpanel) class which are used in the program
	//XXX I also want something to switch between tabscreens (not for this application)
	public void initScreen(){
		lbl_fail_login.setVisible(false);
	}
	
}
